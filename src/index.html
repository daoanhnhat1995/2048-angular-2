<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <title>2048 Angular 2 </title>
  <base href=".">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>

<body>
  <my-app>Loading...</my-app>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/velocity/1.3.1/velocity.min.js"> </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/velocity/1.3.1/velocity.ui.min.js"> </script>
  <script>
      function movePiece(fromTileLoc, toTileLoc) {
          var scalar = 115;

          var from_x = Math.floor(fromTileLoc / 4);
          var from_y = fromTileLoc % 4;

          var to_x = Math.floor(toTileLoc / 4);
          var to_y = toTileLoc % 4;

          var toTile = document.getElementById(to_x + '_' + to_y);
          var fromTile = document.getElementById(from_x + '_' + from_y);

          Velocity(toTile, {'z-index': 10 }, 1)

          Velocity(toTile, {'scale': .7 }, { delay: 125, duration: 0 })
              .then(function() {
                  Velocity(toTile, { 'scale': 1 }, { duration: 125})
              })

          //vector diff
          var diff_x = to_x - from_x;
          var diff_y = to_y - from_y;

          //determine tile direction
          var direction;
          if(diff_x != 0){
            direction = 'top';
          }
          else if (diff_y != 0){
            direction = 'left';
          }

          var moveTile = {};
          moveTile[direction] = ((diff_x || diff_y) * scalar) + 'px';

          Velocity(fromTile, moveTile, 250);

      }
      // setTimeout(function() {
      //     movePiece(2, 0);
      // }, 2000);
  </script>
</body>

</html>